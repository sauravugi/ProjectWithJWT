<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin|Saurav.com</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <style>
      #intro{
          margin: auto;
          text-align: center;
          margin-top: 20px;
          color: teal;
      }
      #tokendiv{
        width: 800px;
        margin: auto;
        margin-top: 20px;
        height: 100px;
        margin-left: 30px;
        margin-right: 30px;

      }
      .Main{
          width: 1200px;
          display: flex;
          justify-content:space-around;
          align-items: center;
          height: 400px;
          margin: auto;
      }
      .Main>div{
          width: 1000px;
          height: 400px;
          margin: auto;
          text-align: center;
          color: teal;
          box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
      }
      .btn{
          margin-top: 50px;
          height: 40px;
          width: 150px;
          color: brown;
          background-color: teal;
          margin-right: 20px;
          
      }
      
  </style>
</head>

<body>
    <h1 id="intro">Admin Page (Saurav.Com)</h1>
    <div id="tokendiv">
    <h3>Token For Security : - </h3>
    <p id="token"></p>
    </div>
    <div class="Main">
      <div class="Admin">
          <h3 style="margin-top: 20px ;">Admin Work</h3>
          <button class="btn" data-toggle="modal" data-target="#exampleModalCenter8"><a href="#modal">Add Product</a></button>
          
              <!-- Modal for Adding Product-->
          <div class="modal fade" id="exampleModalCenter8" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                  <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Product Details</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                  </button>
                  </div>
                  <div class="modal-body">
                      <form id="myform8">
                          <div class="form-group">
                            <label class="col-form-label">Product Name :- </label>
                            <input type="text" class="form-control" id="productname" placeholder="Enter Name">
                          </div>
                          <div class="form-group">
                              <label class="col-form-label">Product Price :- </label>
                              <input type="text" class="form-control" id="productprice" placeholder="Enter Price">
                          </div>
                          <div class="form-group">
                              <label class="col-form-label">Product Quantity :- </label>
                              <input type="text" class="form-control" id="productquantity" placeholder="Enter Quantity">
                            </div>
                            <div class="form-group">
                                <label class="col-form-label">Product Category :- </label>
                                <input type="text" class="form-control" id="productcategory" placeholder="Enter Category">
                            </div>
                        </form>
                  </div>
                  <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary" id="submit8" data-toggle="modal" data-target="#exampleModal8">Save</button>
                  </div>
              </div>
              </div>
          </div>

          <!-- Message Modal Adding Product-->
          <div class="modal fade" id="exampleModal8" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
              <div class="modal-content">
                  <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Response Message</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                  </button>
                  </div>
                  <div class="modal-body" id="message8">
                  
                  </div>
              </div>
              </div>
          </div>

          <button class="btn" data-toggle="modal" data-target="#exampleModalCenter2"><a href="#modal">Find User</a></button>
                          <!-- Modal for Find User By Id-->
                          <div class="modal fade" id="exampleModalCenter2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                              <div class="modal-dialog modal-dialog-centered" role="document">
                              <div class="modal-content">
                                  <div class="modal-header">
                                  <h5 class="modal-title" id="exampleModalLongTitle">User Data</h5>
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                      <span aria-hidden="true">&times;</span>
                                  </button>
                                  </div>
                                  <div class="modal-body">
                                      <form id="myform2">
                                          <div class="form-group">
                                              <label class="col-form-label">User Id </label>
                                              <input type="text" class="form-control" id="userid" placeholder="Enter Id">
                                          </div>
                                        </form>
                                  </div>
                                  <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="button" class="btn btn-primary" id="submit2" data-toggle="modal" data-target="#exampleModal2">Save</button>
                                  </div>
                              </div>
                              </div>
                          </div>

                                     <!-- Message Modal Find User -->
                        <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Response Message</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                </div>
                                <div class="modal-body" id="message2">
                                
                                </div>
                            </div>
                            </div>
                        </div>
                        <button class="btn" data-toggle="modal" data-target="#exampleModalCenter3"><a href="#modal">Month Orders</a></button>
                        <!-- Modal for MonthWise Orders-->
                        <div class="modal fade" id="exampleModalCenter3" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLongTitle">User Data</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                </div>
                                <div class="modal-body">
                                    <form id="myform3">
                                        <div class="form-group">
                                            <label class="col-form-label">Enter Month Number:-</label>
                                            <input type="text" class="form-control" id="monthnumber" placeholder="Enter Month">
                                        </div>
                                      </form>
                                </div>
                                <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-primary" id="submit3" data-toggle="modal" data-target="#exampleModal3">Save</button>
                                </div>
                            </div>
                            </div>
                        </div>

                                   <!-- Message Modal for Month Wise Orders-->
                      <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                          <div class="modal-content">
                              <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Response Message</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                              </button>
                              </div>
                              <div class="modal-body" id="message3">
                              
                              </div>
                          </div>
                          </div>
                      </div>
                      <!--  Sign Out Admin Button and Functionality -->
          <button class="btn" id="logoutbtn">Logged Out</button>
      </div>
  </div>
</body>

</html>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script>
    // Sign Out Functionality
   const token5 = JSON.parse(localStorage.getItem('tokenObject'));

   document.querySelector("#token").innerHTML = token5.token;

   const logoutbtn = document.querySelector("#logoutbtn");

   logoutbtn.addEventListener("click" , function(e){
    e.preventDefault();
    localStorage.clear();
    window.location.href = "index.html";
   })

   // Adding Product Functionality

    let submit8 = document.querySelector("#submit8");
    submit8.addEventListener("click" , async function(e){
        e.preventDefault();
        console.log("Inside Adding Product");
        let model = {
            productName : document.querySelector("#productname").value,
            price : document.querySelector("#productprice").value,
            quantity : document.querySelector("#productquantity").value,
            category : document.querySelector("#productcategory").value

        }
        
        model = JSON.stringify(model);
        console.log(model);
        let link = 'http://localhost:8007/saurav/admin/products' ;

        let response = await fetch( link , {
            method : "POST" ,
            body : model ,
            headers :{ "Content-Type" : "application/json",
                        "Authorization":`Bearer ${token5.token}`
                    }
        })

        //"Authorization":"Bearer "+token5.token" Not Possible Because Authorization Time not Concate work
        
        
        // For closing form tab and reseting
        document.querySelector("#myform8").reset();
        $("#exampleModalCenter8").modal("toggle");

        response.json().then(data => {
            document.querySelector("#message8").innerHTML = data.message;
            console.log(data);
        })
        
    })

    // Find User By ID Functionality

    let submit2 = document.querySelector("#submit2");
    submit2.addEventListener("click" , async function(e){
        e.preventDefault();

        const userid = document.querySelector("#userid").value;
        
        let link = `http://localhost:8007/saurav/admin/customers/${userid}` ;

        let response = await fetch( link , {
            method : "GET" ,
            headers :{ "Content-Type" : "application/json",
                        "Authorization":`Bearer ${token5.token}`
                    }
        })
        
        
        
        // For closing form tab and reseting
        document.querySelector("#myform2").reset();
        $("#exampleModalCenter2").modal("toggle");

        response.json().then(data => {
            document.querySelector("#message2").innerHTML = "Customer Id "+data.customerId+", Customer Name "+data.customerName;
            console.log(data);
        })
        
    })

    // Find Orders by MonthWise
    let submit3 = document.querySelector("#submit3");
    submit3.addEventListener("click" , async function(e){
        e.preventDefault();

        const monthnumber = document.querySelector("#monthnumber").value;
        
        let link = `http://localhost:8007/saurav/admin/orders/${monthnumber}` ;

        let response = await fetch( link , {
            method : "GET" ,
            headers :{ "Content-Type" : "application/json",
                        "Authorization":`Bearer ${token5.token}`
                    }
        })
        
        //"Order Date "+el.orderdate+", Total Bill "+el.totalBill
        
        // For closing form tab and reseting
        document.querySelector("#myform3").reset();
        $("#exampleModalCenter3").modal("toggle");

        response.json().then(data => {
            let textall = "";
            data.forEach(el => {
                textall = textall +"{ Order Date "+el.orderdate+", Total Bill "+el.totalBill+" },"
                console.log(el);
            });
            document.querySelector("#message3").innerHTML = textall;
            console.log(data);
        })
        
    })
</script>